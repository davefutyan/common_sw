<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.14"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Common Software: Program Parameter Interface</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="cheops-logo.png"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Common Software
   &#160;<span id="projectnumber">05</span>
   </div>
   <div id="projectbrief">Common Software for CHEOPS SOC - Python API</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.14 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#files">Files</a> &#124;
<a href="#nested-classes">Classes</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">Program Parameter Interface</div>  </div>
</div><!--header-->
<div class="contents">

<p>This module provides a class to read job order files and gives access to the program parameters and file names.  
<a href="#details">More...</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="files"></a>
Files</h2></td></tr>
<tr class="memitem:joborder_8py"><td class="memItemLeft" align="right" valign="top">file &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="joborder_8py.html">joborder.py</a></td></tr>
<tr class="memdesc:joborder_8py"><td class="mdescLeft">&#160;</td><td class="mdescRight">Module for parsing job order files. <br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:programparams_8py"><td class="memItemLeft" align="right" valign="top">file &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="programparams_8py.html">programparams.py</a></td></tr>
<tr class="memdesc:programparams_8py"><td class="mdescLeft">&#160;</td><td class="mdescRight">This module contains classes and methods for processing and accessing input to the program. <br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
Classes</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classprogram__params_1_1joborder_1_1_job_order.html">program_params.joborder.JobOrder</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">This class is a simple container for the data read from a job order file.  <a href="classprogram__params_1_1joborder_1_1_job_order.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classprogram__params_1_1joborder_1_1_job_order_parser.html">program_params.joborder.JobOrderParser</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">Class for parsing accessing data in a job order file.  <a href="classprogram__params_1_1joborder_1_1_job_order_parser.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classprogram__params_1_1programparams_1_1_program_params.html">program_params.programparams.ProgramParams</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">Top level interface class to access all parameters of a program.  <a href="classprogram__params_1_1programparams_1_1_program_params.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:ga079fd1167c853d6c857e7dc4f9ac7b0a"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___prog_param.html#ga079fd1167c853d6c857e7dc4f9ac7b0a">program_params.programparams.addParserArguments</a> (parser, params)</td></tr>
<tr class="memdesc:ga079fd1167c853d6c857e7dc4f9ac7b0a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Addes command line arguments a an argparser.  <a href="group___prog_param.html#ga079fd1167c853d6c857e7dc4f9ac7b0a">More...</a><br /></td></tr>
<tr class="separator:ga079fd1167c853d6c857e7dc4f9ac7b0a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga1479089a3dd3ee5428f0e4c27275ee91"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___prog_param.html#ga1479089a3dd3ee5428f0e4c27275ee91">template_init.cheopsExit</a> (createTriggerFile=True)</td></tr>
<tr class="memdesc:ga1479089a3dd3ee5428f0e4c27275ee91"><td class="mdescLeft">&#160;</td><td class="mdescRight">Performs exit routines before program termination.  <a href="group___prog_param.html#ga1479089a3dd3ee5428f0e4c27275ee91">More...</a><br /></td></tr>
<tr class="separator:ga1479089a3dd3ee5428f0e4c27275ee91"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gab6fc3e6c043c4b86fb7a597c828982a4"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___prog_param.html#gab6fc3e6c043c4b86fb7a597c828982a4">template_init.cheopsInit</a> (verboseLogging=True)</td></tr>
<tr class="memdesc:gab6fc3e6c043c4b86fb7a597c828982a4"><td class="mdescLeft">&#160;</td><td class="mdescRight">Implementation of the cheopsInit function.  <a href="group___prog_param.html#gab6fc3e6c043c4b86fb7a597c828982a4">More...</a><br /></td></tr>
<tr class="separator:gab6fc3e6c043c4b86fb7a597c828982a4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga38c551b606bb1279d07adf0eec33d876"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___prog_param.html#ga38c551b606bb1279d07adf0eec33d876">program_params.programparams.convertBoolString</a> (stringValue, paramName)</td></tr>
<tr class="memdesc:ga38c551b606bb1279d07adf0eec33d876"><td class="mdescLeft">&#160;</td><td class="mdescRight">Converts a string value to boolean False of True.  <a href="group___prog_param.html#ga38c551b606bb1279d07adf0eec33d876">More...</a><br /></td></tr>
<tr class="separator:ga38c551b606bb1279d07adf0eec33d876"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga6922cc1ebf1c554ab5df5e0d99be555d"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___prog_param.html#ga6922cc1ebf1c554ab5df5e0d99be555d">program_params.joborder.getJobOrder</a> (path, progName)</td></tr>
<tr class="memdesc:ga6922cc1ebf1c554ab5df5e0d99be555d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Parses a job order file and returns the data for the processor given as argument.  <a href="group___prog_param.html#ga6922cc1ebf1c554ab5df5e0d99be555d">More...</a><br /></td></tr>
<tr class="separator:ga6922cc1ebf1c554ab5df5e0d99be555d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gae9deeac550038c80f010106b8bcf5fc0"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___prog_param.html#gae9deeac550038c80f010106b8bcf5fc0">program_params.programparams.parseArguments</a> (progName, version)</td></tr>
<tr class="memdesc:gae9deeac550038c80f010106b8bcf5fc0"><td class="mdescLeft">&#160;</td><td class="mdescRight">parses the program arguments.  <a href="group___prog_param.html#gae9deeac550038c80f010106b8bcf5fc0">More...</a><br /></td></tr>
<tr class="separator:gae9deeac550038c80f010106b8bcf5fc0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga63673dbc22ec69d4fb6e7289593f170a"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___prog_param.html#ga63673dbc22ec69d4fb6e7289593f170a">program_params.programparams.parseParameterFile</a> (progName, parser)</td></tr>
<tr class="memdesc:ga63673dbc22ec69d4fb6e7289593f170a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Parses program parameters defined in the program parameter configuration file.  <a href="group___prog_param.html#ga63673dbc22ec69d4fb6e7289593f170a">More...</a><br /></td></tr>
<tr class="separator:ga63673dbc22ec69d4fb6e7289593f170a"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<p>This module provides a class to read job order files and gives access to the program parameters and file names. </p>
<dl class="section author"><dt>Author</dt><dd>Reiner Rohlfs UGE </dd>
<dd>
Anja Bekkelien UGE</dd></dl>
<h4>Program structure</h4>
<p>Each program shall use the <a class="el" href="group___prog_param.html#gab6fc3e6c043c4b86fb7a597c828982a4" title="Implementation of the cheopsInit function. ">cheopsInit()</a> function to initialize the program_params module, as the first function call of the program. Equally, the method <a class="el" href="group___prog_param.html#ga1479089a3dd3ee5428f0e4c27275ee91" title="Performs exit routines before program termination. ">cheopsExit()</a> shall be called at the very end of the program:</p>
<div class="fragment"><div class="line"><span class="preprocessor"># File mymodule.py</span></div><div class="line"> </div><div class="line">def main(programParams):</div><div class="line">   print(<span class="stringliteral">&quot;main&quot;</span>)</div><div class="line"> </div><div class="line">if __name__ == <span class="stringliteral">&quot;__main__&quot;</span>:</div><div class="line">   from mymodule_init import <a class="code" href="group___prog_param.html#gab6fc3e6c043c4b86fb7a597c828982a4">cheopsInit</a>, <a class="code" href="group___prog_param.html#ga1479089a3dd3ee5428f0e4c27275ee91">cheopsExit</a></div><div class="line">   programParams = <a class="code" href="group___prog_param.html#gab6fc3e6c043c4b86fb7a597c828982a4">cheopsInit</a>()</div><div class="line"></div><div class="line">   main(programParams)</div><div class="line">   </div><div class="line">   <a class="code" href="group___prog_param.html#ga1479089a3dd3ee5428f0e4c27275ee91">cheopsExit</a>()</div></div><!-- fragment --><p>The Python script mymodule_init.py is auto generated in the same directory as the EXEC_TARGET, in this example mymodule.py, when running <code>make install</code>.</p>
<h4>Program input</h4>
<p>The program params object returned by <a class="el" href="group___prog_param.html#gab6fc3e6c043c4b86fb7a597c828982a4" title="Implementation of the cheopsInit function. ">cheopsInit()</a> shall be used by the program to access command line arguments.</p>
<p>This object will check if a job order file was given as input argument to the program, and provide access to its contents, see the following section.</p>
<p>The program params object will also contain the values of other command line arguments. These can be accessed by calling the object's getParam(paramName) method:</p>
<div class="fragment"><div class="line">&gt; testProgram.py --param1=val1 --param2=val2 --jobOrder.xml</div></div><!-- fragment --><div class="fragment"><div class="line"><span class="preprocessor"># File testProgram.py</span></div><div class="line"></div><div class="line">programParams = <a class="code" href="group___prog_param.html#gab6fc3e6c043c4b86fb7a597c828982a4">cheopsInit</a>()</div><div class="line"></div><div class="line"><span class="preprocessor"># Get a list containing all input data structures defined in the job order</span></div><div class="line">dataTypes = programParams.getInputStructNames()</div><div class="line"></div><div class="line"><span class="preprocessor"># Get a list of all input files for the data type SCI_RAW_FullArray</span></div><div class="line">files = programParams.getInputFiles(<span class="stringliteral">&#39;SCI_RAW_FullArray&#39;</span>)</div><div class="line"></div><div class="line"><span class="preprocessor"># The output directory defined in the job order</span></div><div class="line">outputDir = programParams.getOutDir()</div><div class="line"></div><div class="line"><span class="preprocessor"># Get the values of the other command line arguments</span></div><div class="line">val1 = programParams.getParam(<span class="stringliteral">&#39;param1&#39;</span>)</div><div class="line">val2 = programParams.getParam(<span class="stringliteral">&#39;param2&#39;</span>)</div></div><!-- fragment --><p>The command line parameters must be defined in a configuration file as described later in this document. If un-defined parameters are given on the command line an error is thrown.</p>
<h4>The job order file </h4>
<p>The job order lists the input files and output directories that are available to the program. The file names and the output directories may contain environment variables, which will be replaces by their values. They have to be specified like this: ${NAME}. <br />
 The program_params module provides an interface to the job order file via the class ProgramParams, which is instantiated by the <a class="el" href="group___prog_param.html#gab6fc3e6c043c4b86fb7a597c828982a4" title="Implementation of the cheopsInit function. ">cheopsInit()</a> function. This class has methods for</p>
<ul>
<li>getting the data types (structure names) that are available in the job order and for getting all files of a specific data type</li>
<li>getting the output directories to which the program can write its output files</li>
</ul>
<p>The module will also provide the following parameters from the job order file's &lt;Ipf_Conf&gt; element. To retrieve these values from program params, use the getParam(name) method with the value of the Key column as argument:</p>
<table class="doxtable">
<tr>
<th>Element name </th><th>Key </th><th>Value  </th></tr>
<tr>
<td>&lt;Processor_Name&gt; </td><td>"Processor_Name" </td><td>The name of the processor.  <br />
 </td></tr>
<tr>
<td>&lt;Version&gt; </td><td>"Version" </td><td>The version of the processor.  <br />
 </td></tr>
<tr>
<td>&lt;Stdout_Log_Level&gt; </td><td>"Stdout_Log_Level" </td><td>The lowest log level sent to stdout.  <br />
 </td></tr>
<tr>
<td>&lt;Stderr_Log_Level&gt; </td><td>"Stderr_Log_Level" </td><td>The lowest log level sent to stderr.  <br />
 </td></tr>
<tr>
<td>&lt;Test&gt; </td><td>"Test" </td><td>A 'boolean' value of "1" or "0". Defines weather this is a test run or not.  <br />
 </td></tr>
<tr>
<td>&lt;Breakpoint_Enable&gt; </td><td>"Breakpoint_Enable" </td><td>A 'boolean value of "1" or "0".  <br />
 </td></tr>
<tr>
<td>&lt;Sensing_Time&gt;&lt;Start&gt; </td><td>"Start" </td><td><p class="starttd">If the execution of the program was triggered by the ingestion of a specific data product type into the CHEOPS Archive, this is the validity start time of that data product.</p>
<p>If instead the program was executed by the processing framework with a time window as input argument, as is the case with reports generated at regular time intervals, this is the start time of that time window.</p>
<p class="endtd">In the job order, this value is formatted as yyyymmdd_hhmmssffffff. When the ProgramParams class reads this parameter, it re-formats the value to a valid <a class="el" href="class_u_t_c.html" title="To store a UTC time. ">UTC</a> time of the format yyyy-mm-ddThh:mm:ss.ffffff, which may be used to construct <a class="el" href="class_u_t_c.html" title="To store a UTC time. ">UTC</a> objects.   <br />
 </p>
</td></tr>
<tr>
<td>&lt;Sensing_Time&gt;&lt;Stop&gt; </td><td>"Stop" </td><td><p class="starttd">If the execution of the program was triggered by the ingestion of a specific data product type into the CHEOPS Archive, this is the validity stop time of that data product.</p>
<p>If instead the program was executed by the processing framework with a time window as input argument, as is the case with reports generated at regular time intervals, this is the stop time of that time window.</p>
<p class="endtd">In the job order, this value is formatted as yyyymmdd_hhmmssffffff. When the ProgramParams class reads this parameter, it re-formats the value to a valid <a class="el" href="class_u_t_c.html" title="To store a UTC time. ">UTC</a> time of the format yyyy-mm-ddThh:mm:ss.ffffff, which may be used to construct <a class="el" href="class_u_t_c.html" title="To store a UTC time. ">UTC</a> objects. &lt;/td  </p>
</td></tr>
<tr>
<td>&lt;Dynamic_Processing_Parameters&gt;&lt;Processing_Parameter&gt; </td><td>The value of the &lt;Name&gt; element. </td><td>The value of the &lt;Value&gt; element.  </td></tr>
</table>
<p>Example usage:</p>
<div class="fragment"><div class="line"><span class="preprocessor"># Read the values of parameters defined in the job order</span></div><div class="line"><a class="code" href="template__init_8py.html#abbaf9c6c01879c86d8d47798b82b750e">processorName</a> = programParams.getParam(<span class="stringliteral">&#39;Processor_Name&#39;</span>)</div><div class="line">processingChain = programParams.getParam(<span class="stringliteral">&#39;PROC_CHN&#39;</span>)</div></div><!-- fragment --><p>A job order file may contain multiple programs. ProgramParams will provide data only for the current program, and it is therefore important that the tag &lt;Task_Name&gt; is set correctly in the job order file to the name of the program binary.</p>
<p>During operation, the job order file will be the only input argument to the program and will be passed to the program on the command line. For example: </p><pre>
     program_name job_order.xml
  </pre><p> <br />
 </p><h4>Access to input files</h4>
<p>To get a list of all data types available to the program as input in the job order file, call </p><div class="fragment"><div class="line">dataStructures = programParams.getInputStructNames()</div></div><!-- fragment --><p>For every data type, you can retrieve a list of files of that type: </p><div class="fragment"><div class="line">dataStructure = <span class="stringliteral">&quot;SCI_PRW_FullArray&quot;</span> # Example data structure name</div><div class="line">inputFiles = programParams.getInputFiles(dataStructure)</div></div><!-- fragment --><p>For fits files, the method <code>getInputFiles</code> returns individual fits extensions, with the extension name in square brackets:</p>
<p>CH_PR001111_TG002004_PS15012009_TO0000232347.358_SCI_PRW_SubArray_V000.fits[SCI_PRW_SubArray]</p>
<p>This means that a fits file with multiple extensions might be listed several times in the job order, under different data structures.</p>
<p>Note: for fits data structures, the data structure name shall be the name defined in the <code>extname</code> attribute of the HDU element in the FITS schema files. In the job order file they are defined in the &lt;File_Type&gt; - tag.</p>
<h4>Access to output directories</h4>
<p>Two output directories are defined in the job order file:</p>
<ul>
<li>Out: All files placed in this directory will be automatically ingested into the archive if the program runs successfully.</li>
<li>Tmp: This directory is for temporary files, which will be deleted when the program terminates.</li>
</ul>
<p>These directories are retrieved like this: </p><div class="fragment"><div class="line">outDir = programParams.getOutDir();</div><div class="line">tmpDir = programParams.getTmpDir();</div></div><!-- fragment --><h4>Command line arguments</h4>
<p>Additional program parameters can be defined in a configuration file located in the conf directory of the module. This file must be an xml file and have the exact same name as the main script, with the extension .xml. For instance, for a program named TestProgram.py the parameter configuration file must be named TestProgram.py.xml.</p>
<p>Each parameter is identified by its &lt;name&gt;, which has to be unique. Further optional elements are listed in the follwoing table.</p>
<table class="doxtable">
<tr>
<th>Element </th><th>Description  <br />
 </th></tr>
<tr>
<td>&lt;name&gt; </td><td>This element is required. Note that dashes inside the name will be converted to underscores.   </td></tr>
<tr>
<td>&lt;short_name&gt; </td><td>One character, which can be used as name of the parameter on the command line. For example -<b>f</b> filename   </td></tr>
<tr>
<td>&lt;value&gt; </td><td>The default value of the parameter. If the value element is not defined in the XML parameter file, then the parameter is required and must be specified in the command line when the program is run. If the value element <em>is</em> defined, then the parameter is optional and this value will be used in case the parameter is not defined in the command line. If the value element is defined but is empty, then the default value is <code>None</code> (or <code>[]</code> for repeatable parameters).   </td></tr>
<tr>
<td>&lt;type&gt; </td><td><p class="starttd">Defines the data type of the parameter. It can be either <b> string, int, double </b> or <b>bool</b>. <b>string</b> is the default, if &lt;type&gt; is not defined. If the type is <b>bool</b>, then the parameter is considered a flag, which can be either present or not present on the command line. For flags, the value element defines the value returned when the flag is present on the command line. For example, if &lt;value&gt;true&lt;/value&gt; and &lt;type&gt;bool&lt;/type&gt; then the returned value of the flag will be True if it is present on the command line and False if it is not present. If &lt;value&gt; is empty or not defined, the default value is True.</p>
<p class="endtd">If type is <b>bool</b> only the following case insensitive values are allowed: <b> true, false, on, off, yes, no, 1, 0 </b>   </p>
</td></tr>
<tr>
<td>&lt;help&gt; </td><td>A short description of the parameter. It will be printed if the program is called with the <b>-h</b> option.   </td></tr>
<tr>
<td>&lt;repeatable&gt; </td><td><p class="starttd">Defines whether or not the parameter can occur multiple times on the command line and takes the values true or false. If not defined in the XML configuration file then the default value is false. The returned value of a repeatable argument is a list containing all values of this parameter.</p>
<p>For example, the command <code>--param=val1 --param=val2 --param=val3</code> would return the list <code>[val1, val2, val3]</code>.  </p>
<p class="endtd"></p>
</td></tr>
</table>
<p><br />
 The Python package argparse is used to parse the input arguments.</p>
<p>The value of each parameter can be overwritten by a command line parameter like this: <code>--parameter_name</code> <code>new_value</code> or <code>--parameter_name=new_value</code> </p>
<p>The shortest possible definition of a parameter in an xml parameter file looks like this:</p>
<pre>
      &lt;?xml version="1.0" encoding="UTF-8"?&gt;
      &lt;program_params xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
           xsi:noNamespaceSchemaLocation="program_params_schema.xsd"&gt;</pre><pre>      &lt;param&gt;
          &lt;name&gt;X-Center&lt;/name&gt;
      &lt;/param&gt;</pre><pre>      &lt;/program_params&gt; 
  </pre><p>In this example the value of the parameter X-Center has to be given in the command line:</p>
<pre>
      program --X-Center=49
      program --X-Center 49
  </pre><p> <br />
 A complete definition of a parameter would look like this:</p>
<pre>
      &lt;?xml version="1.0" encoding="UTF-8"?&gt;
      &lt;program_params xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
           xsi:noNamespaceSchemaLocation="program_params_schema.xsd"&gt;</pre><pre>      &lt;param&gt;
          &lt;name&gt;X-Center&lt;/name&gt;
          &lt;short_name&gt;x&lt;/short_name&gt;
          &lt;value&gt;100&lt;/value&gt;
          &lt;type&gt;int&lt;/type&gt;
          &lt;help&gt;X - position of source in image [pixel]&lt;/help&gt;
          &lt;repeatable&gt;false&lt;/repeatable&gt;
      &lt;/param&gt;</pre><pre>      &lt;/program_params&gt; 
  </pre><p><b> The <a class="el" href="group___prog_param.html#ga1479089a3dd3ee5428f0e4c27275ee91" title="Performs exit routines before program termination. ">cheopsExit()</a> method</b></p>
<p>Each program shall call the method <a class="el" href="group___prog_param.html#ga1479089a3dd3ee5428f0e4c27275ee91" title="Performs exit routines before program termination. ">cheopsExit()</a> at the very end of the program. This method writes a so-called trigger file to disk which is used by the processing framework to detect that the program has terminated. If the program read in a job order file that contained an input trigger file, the values of this trigger file are stored internally and will be written into the output trigger file.</p>
<p>Trigger file creation can be turned off by passing False to <a class="el" href="group___prog_param.html#ga1479089a3dd3ee5428f0e4c27275ee91" title="Performs exit routines before program termination. ">cheopsExit()</a>.</p>
<p><b> Trigger files</b></p>
<p>In addition to the trigger file created by <a class="el" href="group___prog_param.html#ga1479089a3dd3ee5428f0e4c27275ee91" title="Performs exit routines before program termination. ">cheopsExit()</a> it is possible to create extra trigger files using the static method <a class="el" href="class_trigger_file.html#a10bea92c584035d534a38c859578d1e3" title="Static method that writes a trigger file. ">TriggerFile.writeTriggerFile()</a>. This method takes as arguments all the values that will be inserted into the trigger file.</p>
<p>If an input trigger file was provided in the job order of the program, the values of this trigger file will be accessible through static methods on the <a class="el" href="class_trigger_file.html" title="Class that implements functionality for reading and writing trigger files. ">TriggerFile</a> class:</p>
<div class="fragment"><div class="line"><a class="code" href="class_trigger_file.html">TriggerFile</a>.<a class="code" href="class_trigger_file.html#a10bea92c584035d534a38c859578d1e3">writeTriggerFile</a>(programParams.getOutDir(),</div><div class="line">                             programParams.getParam(<span class="stringliteral">&#39;Processor_Name&#39;</span>),</div><div class="line">                             <a class="code" href="class_trigger_file.html">TriggerFile</a>.<a class="code" href="class_trigger_file.html#a4825d5712e2ec1cdedb5e9b275d32e23">getPassId</a>(), </div><div class="line">                             <a class="code" href="class_trigger_file.html">TriggerFile</a>.<a class="code" href="class_trigger_file.html#af1c735ad3b4fcfd192c3a350ad5e61a5">getVisitId</a>, </div><div class="line">                             <a class="code" href="class_trigger_file.html">TriggerFile</a>.<a class="code" href="class_trigger_file.html#a825fedc2cea8cba2c6102612984f50ad">getValidityStart</a>(),</div><div class="line">                             <a class="code" href="class_trigger_file.html">TriggerFile</a>.<a class="code" href="class_trigger_file.html#a64736caf92d1abeadc77faa59bc05864">getValidityStop</a>(),</div><div class="line">                             <a class="code" href="class_trigger_file.html">TriggerFile</a>.<a class="code" href="class_trigger_file.html#ab6ea87c04f31e76740e5edd71bae8eac">getProcessingVersion</a>(),</div><div class="line">                             <a class="code" href="class_trigger_file.html">TriggerFile</a>.<a class="code" href="class_trigger_file.html#ad1b678907deb9c1b0321c0a567e37535">getOutputProcessingNumber</a>(),</div><div class="line">                             <a class="code" href="class_trigger_file.html">TriggerFile</a>.<a class="code" href="class_trigger_file.html#ad1b678907deb9c1b0321c0a567e37535">getOutputProcessingNumber</a>(),</div><div class="line">                             <a class="code" href="class_trigger_file.html">TriggerFile</a>.<a class="code" href="class_trigger_file.html#acf369add27f40562456bc139b5a3da44">getObsid</a>(),</div><div class="line">                             dataName)</div></div><!-- fragment --> <h2 class="groupheader">Function Documentation</h2>
<a id="ga079fd1167c853d6c857e7dc4f9ac7b0a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga079fd1167c853d6c857e7dc4f9ac7b0a">&#9670;&nbsp;</a></span>addParserArguments()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def program_params.programparams.addParserArguments </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>parser</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>params</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Addes command line arguments a an argparser. </p>
<dl class="section author"><dt>Author</dt><dd>Anja Bekkelien UGE</dd></dl>
<p>The arguments to add are defined in the 'params' method argument. This is a dictionary containing the information read from a parameter configuration xml file. The dictionary key is the 'name' of the parameter, and the value is another dictionary containing the values of all elements contained inside the param element, including the 'name' element. The key names of this inner dictionary are identical to the element names found in the xml file.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">parser</td><td>an argparser </td></tr>
    <tr><td class="paramname">params</td><td>a dictionary containing information read from a parameter configuration file </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="ga1479089a3dd3ee5428f0e4c27275ee91"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga1479089a3dd3ee5428f0e4c27275ee91">&#9670;&nbsp;</a></span>cheopsExit()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def template_init.cheopsExit </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>createTriggerFile</em> = <code>True</code></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Performs exit routines before program termination. </p>
<dl class="section author"><dt>Author</dt><dd>Anja Bekkelien UGE</dd></dl>
<p>By default, the function creates an output trigger file containing values read from an input trigger file defined in the job order. If no input trigger file found in the job order, the output trigger file will contain no values.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">createTriggerFile</td><td>if True, an output trigger file is created, if False, no output trigger file is created. The default value is True. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="gab6fc3e6c043c4b86fb7a597c828982a4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gab6fc3e6c043c4b86fb7a597c828982a4">&#9670;&nbsp;</a></span>cheopsInit()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def template_init.cheopsInit </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>verboseLogging</em> = <code>True</code></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Implementation of the cheopsInit function. </p>
<dl class="section author"><dt>Author</dt><dd>Anja Bekkelien UGE </dd></dl>

</div>
</div>
<a id="ga38c551b606bb1279d07adf0eec33d876"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga38c551b606bb1279d07adf0eec33d876">&#9670;&nbsp;</a></span>convertBoolString()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def program_params.programparams.convertBoolString </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>stringValue</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>paramName</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Converts a string value to boolean False of True. </p>
<dl class="section author"><dt>Author</dt><dd>Anja Bekkelien UGE</dd></dl>
<p>The following values are converted to True: 'on', 'yes', '1', 'true', 'True'</p>
<p>The following values are converted to False: 'off', 'no', '0', 'false', 'False', '', None</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">stringValue</td><td>the string to be converted to bool. </td></tr>
    <tr><td class="paramname">paramName</td><td>the name of the parameter to which the value belongs </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>boolean value </dd></dl>

</div>
</div>
<a id="ga6922cc1ebf1c554ab5df5e0d99be555d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga6922cc1ebf1c554ab5df5e0d99be555d">&#9670;&nbsp;</a></span>getJobOrder()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def program_params.joborder.getJobOrder </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>path</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>progName</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Parses a job order file and returns the data for the processor given as argument. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">path</td><td>the path to the job order file. </td></tr>
    <tr><td class="paramname">progName</td><td>the name of the processor. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>the job order data extracted for the processor </dd></dl>

</div>
</div>
<a id="gae9deeac550038c80f010106b8bcf5fc0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gae9deeac550038c80f010106b8bcf5fc0">&#9670;&nbsp;</a></span>parseArguments()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def program_params.programparams.parseArguments </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>progName</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>version</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>parses the program arguments. </p>
<dl class="section author"><dt>Author</dt><dd>Anja Bekkelien UGE</dd></dl>
<p>The expected arguments are either a -h/&ndash;help or a -v/&ndash;version, or the path to a job order file. If -v or -h is found, the program displays the expected information and exits. If a path is found, it is returned.</p>
<p>Additional program arguments can be defined in the program's configuration file.</p>
<p>Invalid arguments will causes the program to display an error message and exit.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">progName</td><td>the name of the program, aka the task name </td></tr>
    <tr><td class="paramname">version</td><td>the program version </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>If the path to a job order was given on the command line, the method returns a map containing one key, 'job_order', whose value is the path to the job order file. Otherwise, it returns None. </dd></dl>

</div>
</div>
<a id="ga63673dbc22ec69d4fb6e7289593f170a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga63673dbc22ec69d4fb6e7289593f170a">&#9670;&nbsp;</a></span>parseParameterFile()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def program_params.programparams.parseParameterFile </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>progName</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>parser</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Parses program parameters defined in the program parameter configuration file. </p>
<dl class="section author"><dt>Author</dt><dd>Anja Bekkelien UGE</dd></dl>
<p>The method returns a dictionary containing all parameters read from the configuration file.</p>
<p>The dictionary key is the 'name' of the parameter, and the value is another dictionary containing the values of all elements contained inside the param element, including the 'name' element. The key names of this inner dictionary are identical to the element names found in the xml file.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">progName</td><td>the name of the program </td></tr>
    <tr><td class="paramname">parser</td><td>an ArgumentParser object to which the parameters read from file will be added </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>dictionary containing program parameters </dd></dl>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Thu Feb 11 2021 08:56:18 for Common Software by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.14
</small></address>
</body>
</html>
